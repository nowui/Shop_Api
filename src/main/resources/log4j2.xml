<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="OFF">

    <CustomLevels>
        <CustomLevel name="DATABASE" />
    </CustomLevels>

	<Appenders>
		<Console name="Console" target="SYSTEM_OUT"/>

        <Console name="DatabaseConsole" target="SYSTEM_OUT">
            <PatternLayout pattern="-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------%nurl: %X{log_url}%nrequest: %X{log_request}%nresponse: %X{log_response}%n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------%n" />
        </Console>

        <JDBC name="DatabaseAppender" tableName="table_log">
            <ConnectionFactory class="com.shanghaichuangshi.util.DatabaseUtil" method="getConnection" />
            <Column name="log_id" pattern="%X{log_id}" />
            <Column name="log_url" pattern="%X{log_url}" />
            <Column name="log_request" pattern="%X{log_request}" />
            <Column name="log_response" pattern="%X{log_response}" />
            <Column name="authorization_id" pattern="%X{authorization_id}" />
            <Column name="user_id" pattern="%X{user_id}" />
            <Column name="log_code" pattern="%X{log_code}" />
            <Column name="log_platform" pattern="%X{log_platform}" />
            <Column name="log_version" pattern="%X{log_version}" />
            <Column name="log_ip_address" pattern="%X{log_ip_address}" />
            <Column name="log_create_time" pattern="%X{log_create_time}" />
            <Column name="log_run_time" pattern="%X{log_run_time}" />
            <Column name="system_create_user_id" pattern="%X{system_create_user_id}" />
            <Column name="system_create_time" pattern="%X{system_create_time}" />
            <Column name="system_update_user_id" pattern="%X{system_update_user_id}" />
            <Column name="system_update_time" pattern="%X{system_update_time}" />
            <Column name="system_status" pattern="%X{system_status}" />
        </JDBC>
	</Appenders>

	<Loggers>
		<Root level="DEBUG">
            <AppenderRef ref="Console" level="DEBUG" />
            <AppenderRef ref="DatabaseConsole" level="DATABASE" />
            <AppenderRef ref="DatabaseAppender" level="DATABASE" />
		</Root>
	</Loggers>

</Configuration>